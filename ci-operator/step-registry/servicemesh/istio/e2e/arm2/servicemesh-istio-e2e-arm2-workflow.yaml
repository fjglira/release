workflow:
  as: servicemesh-istio-e2e-arm2
  steps:
    pre:
    - chain: hypershift-hostedcluster-create
    - ref: servicemesh-istio-e2e
    post:
    - ref: servicemesh-istio-post
    - chain: hypershift-hostedcluster-dump
    - chain: hypershift-hostedcluster-destroy
    env:
      MAISTRA_BUILDER_IMAGE: "" # value defined in config/maistra/istio tests steps env
      BASE_DOMAIN: "" # value defined in config/maistra/istio-operator tests steps env to override the default domain
      COMPUTE_NODE_TYPE: "m6g.2xlarge" # Using the same node type but different architecture
  documentation: |-
    The servicemesh-istio-e2e-arm workflow provisions a new hypershift cluster and
    creates a test pod with a privileged configuration on AWS using ARM processors,
    allowing job authors to inject their own end-to-end test logic.